"use strict";function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _wrapNativeSuper(a){var b="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(a){function c(){return _construct(a,arguments,_getPrototypeOf(this).constructor)}if(null===a||!_isNativeFunction(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(c,a)},_wrapNativeSuper(a)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function _construct(){return _construct=isNativeReflectConstruct()?Reflect.construct:function(b,c,d){var e=[null];e.push.apply(e,c);var a=Function.bind.apply(b,e),f=new a;return d&&_setPrototypeOf(f,d.prototype),f},_construct.apply(null,arguments)}function _isNativeFunction(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}var WhRating=/*#__PURE__*/function(a){function b(){var a;return _classCallCheck(this,b),a=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this)),a._root=a.attachShadow({mode:"open"}),a._$top=null,a._$bottom=null,a._$icon=null,a._disabled=!1,a._value=0,a._hoverValue=0,a._touched=!1,a._numberOfIcons=5,a}return _inherits(b,a),_createClass(b,[{key:"connectedCallback",value:function connectedCallback(){var a=this;this._root.innerHTML="\n      <style>\n        :host {\n            width: 8.2em;\n            height: 2em;\n            display: inline-block;\n            overflow: hidden;\n            user-select: none;\n            vertical-align: middle;\n            box-sizing: border-box;\n        }          \n        .container {                  \n          color: var(--star-default-color, #c5c5c5); /* second parameter is fallback) */\n          font-size: 2em;\n          line-height: 1em;\n          margin: 0 auto;\n          position: relative;\n          padding: 0;\n          cursor: pointer;\n        }               \n        .container .top {\n          color: var(--star-selected-color, #e7bd06);\n          padding: 0;\n          position: absolute;\n          z-index: 1;\n          display: block;\n          top: 0;\n          left: 0;\n          overflow: hidden;\n          width: 0;       \n        }\n                    \n        .container .bottom {\n          padding: 0;\n          display: block;\n          position: absolute;\n          top: 0;\n          left: 0;\n          unicode-bidi: bidi-override;\n          direction: rtl;\n        }    \n        \n        :host([disabled]) .container {\n            cursor: inherit;\n        }\n\n        :host([disabled]) .container .top {\n            display: block;\n        }\n\n        :host([disabled]) .container .bottom > span:hover,\n        :host([disabled]) .container .bottom > span:hover ~ span {               \n          color: inherit;\n        }     \n\n        span::after {\n          content: var(--wh-rating-symbol, \"\u2605\");\n        }\n      </style>\n      <div class=\"container\">\n          <div class=\"top\">\n          </div>\n          <div class=\"bottom\">\n          </div>\n      </div>\n    ",this._$top=this._root.querySelector(".top"),this._$bottom=this._root.querySelector(".bottom"),this._disabled=null!==this.getAttribute("disabled"),this._$bottom.addEventListener("click",function(b){var c=a._calculateRatingWidth(b);a._disabled||void 0===c||(a._touched=!0,a.value=c,a.dispatchEvent(new Event("change")))}),this._$bottom.addEventListener("mousemove",function(b){a._disabled||(a.hoverValue=a._calculateHoverWidth(b))}),this._$top.addEventListener("mousemove",function(b){a._disabled||(a.hoverValue=a._calculateHoverWidth(b))}),this._$bottom.addEventListener("touchmove",function(b){a._disabled||(a.hoverValue=a._calculateHoverWidth(b))}),this._$top.addEventListener("touchmove",function(b){a._disabled||(a.hoverValue=a._calculateHoverWidth(b))}),this._$bottom.addEventListener("mouseleave",function(){a._disabled||a._render()});var b=this.getAttribute("value");null!=b&&0<+b&&(this._value=+b,this._render());var c=this.getAttribute("number-of-icons");null!=c&&0<+c&&(this._numberOfIcons=+c,this._render("container"))}},{key:"_render",value:function _render(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"click";if(null!==this._$top)switch(a){case"click":this._$top.style.width=this._value+"%";break;case"hover":this._$top.style.width=this._hoverValue+"%";break;case"container":for(var b=0;b<this._numberOfIcons;b++)this._$bottom.appendChild(document.createElement("span")),this._$top.appendChild(document.createElement("span"));this._$icon=this._$bottom.querySelector("span"),this.style.width=this._$icon.offsetWidth*this._numberOfIcons+"px";}}},{key:"_calculateRatingWidth",value:function _calculateRatingWidth(a){var b=this._$bottom.getBoundingClientRect().width,c=a.clientX-this._$bottom.getBoundingClientRect().x;return 100*(c/b)}},{key:"_calculateHoverWidth",value:function _calculateHoverWidth(a){return 100*(a.offsetX/this._$bottom.getBoundingClientRect().width)}},{key:"attributeChangedCallback",value:function attributeChangedCallback(a,b,c){b!==c&&("disabled"===a?this._disabled=null!==c:"value"===a?this._touched||(this._value=c,this._render()):"number-of-icons"===a?this.touched||(this._numberOfIcons=c,this._render("container")):void 0)}},{key:"numberOfIcons",get:function get(){return this._numberOfIcons},set:function set(a){this._numberOfIcons=a,this._render("container")}},{key:"value",get:function get(){return this._value},set:function set(a){this._value===a||(this._touched=!0,this._value=a,this._render())}},{key:"hoverValue",set:function set(a){this._hoverValue=a,this._render("hover")}}],[{key:"observedAttributes",get:function get(){return["disabled","value","number-of-icons"]}}]),b}(_wrapNativeSuper(HTMLElement));window.customElements.define("wh-rating",WhRating);
